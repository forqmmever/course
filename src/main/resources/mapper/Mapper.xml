<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.course.mapper.Mapper">

<!--    <insert id="SavePostLog2" parameterType="map">-->
<!--        insert into ${tableName}-->
<!--        <foreach collection="tableColumns" index="index" item="item" open="(" close=")" separator=",">-->
<!--            ${index}-->
<!--        </foreach>-->
<!--        values-->
<!--        <foreach collection="tableColumns" index="index" item="item" open="(" close=")" separator=",">-->
<!--            #{item}-->
<!--        </foreach>-->
<!--    </insert>-->
    <insert id="SavePostLog" parameterType="com.course.pojo.PostLog">
        INSERT INTO post (metric, tags, timestamp, value)
        VALUES (#{metric}, #{tagsJson}, #{timestamp}, #{value})
    </insert>
<!--    <insert id="SavePostLog">insert into test(id) values (2)</insert>-->
    <select id="GetPostLog" resultType="com.course.pojo.PostLog">
        select * from post
                 where metric = #{metric} and tags like #{instanceId};
    </select>
    <select id="GetMetricConstraint" resultType="com.course.pojo.MetricConstraint">
        select * from MetricConstraint
                 where metric = #{metric};
    </select>
</mapper>
